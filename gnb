import React, { useState } from 'react';
import DatePicker from 'react-datepicker'; // Ensure this package is installed
import 'react-datepicker/dist/react-datepicker.css';
import CommonSelect from './CommonSelect'; // Assuming you have this component
import { Link } from 'react-router-dom';

const ExamForm = () => {
  const [exams, setExams] = useState([]);
  const [examName, setExamName] = useState('');
  const [examDate, setExamDate] = useState(null);
  const [startTime, setStartTime] = useState('');
  const [endTime, setEndTime] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    const newExam = {
      examName,
      examDate,
      startTime,
      endTime,
    };

    setExams([...exams, newExam]);
    // Clear the form inputs
    setExamName('');
    setExamDate(null);
    setStartTime('');
    setEndTime('');
  };

  return (
    <div className="container">
      <form onSubmit={handleSubmit}>
        <div className="modal-body">
          <div className="row">
            <div className="col-md-12">
              <div className="mb-3">
                <label className="form-label">Exam Name</label>
                <input
                  type="text"
                  className="form-control"
                  value={examName}
                  onChange={(e) => setExamName(e.target.value)}
                  required
                />
              </div>
              <div className="mb-3">
                <label className="form-label">Exam Date</label>
                <div className="date-pic">
                  <DatePicker
                    className="form-control datetimepicker"
                    selected={examDate}
                    onChange={(date) => setExamDate(date)}
                    dateFormat="dd-MM-yyyy"
                    placeholderText="16 May 2024"
                    required
                  />
                  <span className="cal-icon">
                    <i className="ti ti-calendar" />
                  </span>
                </div>
              </div>
              <div className="mb-3">
                <label className="form-label">Start Time</label>
                <CommonSelect
                  className="select"
                  options={startTime}
                  onChange={(value) => setStartTime(value)}
                  required
                />
              </div>
              <div className="mb-0">
                <label className="form-label">End Time</label>
                <CommonSelect
                  className="select"
                  options={startTimeOne}
                  onChange={(value) => setEndTime(value)}
                  required
                />
              </div>
            </div>
          </div>
        </div>
        <div className="modal-footer">
          <Link to="#" className="btn btn-light me-2" data-bs-dismiss="modal">
            Cancel
          </Link>
          <button type="submit" className="btn btn-primary">
            Add Exam
          </button>
        </div>
      </form>

      {/* Display Exams Table */}
      {exams.length > 0 && (
        <table className="table mt-4">
          <thead>
            <tr>
              <th>Exam Name</th>
              <th>Exam Date</th>
              <th>Start Time</th>
              <th>End Time</th>
            </tr>
          </thead>
          <tbody>
            {exams.map((exam, index) => (
              <tr key={index}>
                <td>{exam.examName}</td>
                <td>{exam.examDate ? exam.examDate.toLocaleDateString() : ''}</td>
                <td>{exam.startTime}</td>
                <td>{exam.endTime}</td>
              </tr>
            ))}
          </tbody>
        </table>
      )}
    </div>
  );
};

export default ExamForm;
