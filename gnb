import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import DatePicker from 'react-datepicker'; // or wherever you're importing DatePicker from
import CommonSelect from './CommonSelect'; // adjust the import as necessary

const Exam = () => {
  // Step 1: State to hold exams
  const [exams, setExams] = useState([]);
  const [examDetails, setExamDetails] = useState({
    name: '',
    date: null,
    startTime: '',
    endTime: '',
  });

  // Step 2: Function to handle adding an exam
  const handleAddExam = (e) => {
    e.preventDefault();
    setExams([...exams, examDetails]); // Add new exam to the list
    setExamDetails({ name: '', date: null, startTime: '', endTime: '' }); // Reset form
    // You can also close the modal here if necessary
  };

  // Step 3: Handle input changes
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setExamDetails({ ...examDetails, [name]: value });
  };

  const handleDateChange = (date) => {
    setExamDetails({ ...examDetails, date });
  };

  return (
    <div>
      {/* Add Exam Modal */}
      <div className="modal fade" id="add_exam">
        <div className="modal-dialog modal-dialog-centered">
          <div className="modal-content">
            <div className="modal-header">
              <h4 className="modal-title">Add Exam</h4>
              <button
                type="button"
                className="btn-close custom-btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              >
                <i className="ti ti-x" />
              </button>
            </div>
            <form onSubmit={handleAddExam}>
              <div className="modal-body">
                <div className="row">
                  <div className="col-md-12">
                    <div className="mb-3">
                      <label className="form-label">Exam Name</label>
                      <input
                        type="text"
                        className="form-control"
                        name="name"
                        value={examDetails.name}
                        onChange={handleInputChange}
                        required
                      />
                    </div>
                    <div className="mb-3">
                      <label className="form-label">Exam Date</label>
                      <div className="date-pic">
                        <DatePicker
                          className="form-control datetimepicker"
                          format={"DD-MM-YYYY"}
                          selected={examDetails.date}
                          onChange={handleDateChange}
                          placeholderText="16 May 2024"
                          required
                        />
                        <span className="cal-icon">
                          <i className="ti ti-calendar" />
                        </span>
                      </div>
                    </div>
                    <div className="mb-3">
                      <label className="form-label">Start Time</label>
                      <CommonSelect
                        className="select"
                        options={startTime} // Make sure startTime has appropriate values
                        onChange={(option) => setExamDetails({ ...examDetails, startTime: option.value })}
                        value={examDetails.startTime}
                      />
                    </div>
                    <div className="mb-0">
                      <label className="form-label">End Time</label>
                      <CommonSelect
                        className="select"
                        options={startTimeOne} // Make sure startTimeOne has appropriate values
                        onChange={(option) => setExamDetails({ ...examDetails, endTime: option.value })}
                        value={examDetails.endTime}
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div className="modal-footer">
                <Link to="#" className="btn btn-light me-2" data-bs-dismiss="modal">
                  Cancel
                </Link>
                <button type="submit" className="btn btn-primary">
                  Add Exam
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      {/* Display Exams */}
      <div>
        <h3>Exams List</h3>
        <ul>
          {exams.map((exam, index) => (
            <li key={index}>
              {exam.name} - {exam.date ? exam.date.toLocaleDateString() : ''} - {exam.startTime} to {exam.endTime}
            </li>
          ))}
        </ul>
      </div>

      {/* Edit and Delete Modals would go here, similar to Add Exam Modal */}
    </div>
  );
};

export default Exam;
