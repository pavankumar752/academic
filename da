import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import DatePicker from 'react-datepicker';
import 'react-datepicker/dist/react-datepicker.css';
import CommonSelect from './CommonSelect'; // Assuming you have a CommonSelect component

const EditExamModal = ({ exam, startTimeOptions, endTimeOptions, onSave }) => {
  const [examName, setExamName] = useState(exam.name || 'Week Test');
  const [examDate, setExamDate] = useState(exam.date || new Date());
  const [startTime, setStartTime] = useState(exam.startTime || startTimeOptions[1]);
  const [endTime, setEndTime] = useState(exam.endTime || endTimeOptions[1]);

  const handleSave = () => {
    const updatedExam = {
      name: examName,
      date: examDate,
      startTime: startTime,
      endTime: endTime,
    };
    onSave(updatedExam);
  };

  return (
    <form>
      <div className="modal-body">
        <div className="row">
          <div className="col-md-12">
            <div className="mb-3">
              <label className="form-label">Exam Name</label>
              <input
                type="text"
                className="form-control"
                value={examName}
                onChange={(e) => setExamName(e.target.value)}
              />
            </div>
            <div className="mb-3">
              <label className="form-label">Exam Date</label>
              <DatePicker
                className="form-control"
                selected={examDate}
                onChange={(date) => setExamDate(date)}
                dateFormat="dd-MM-yyyy"
              />
            </div>
            <div className="mb-3">
              <label className="form-label">Start Time</label>
              <CommonSelect
                className="select"
                options={startTimeOptions}
                value={startTime}
                onChange={(option) => setStartTime(option)}
              />
            </div>
            <div className="mb-0">
              <label className="form-label">End Time</label>
              <CommonSelect
                className="select"
                options={endTimeOptions}
                value={endTime}
                onChange={(option) => setEndTime(option)}
              />
            </div>
          </div>
        </div>
      </div>
      <div className="modal-footer">
        <Link to="#" className="btn btn-light me-2" data-bs-dismiss="modal">Cancel</Link>
        <Link className="btn btn-primary" to="#" data-bs-dismiss="modal" onClick={handleSave}>Save Changes</Link>
      </div>
    </form>
  );
};

export default EditExamModal;
